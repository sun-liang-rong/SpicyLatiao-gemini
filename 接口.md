# SpicyLatiao 创意展示网站 - 后台管理系统 API 接口规范

本文档定义了 SpicyLatiao 前端展示站与后台管理系统（CMS）之间的交互协议。所有接口均采用 **JSON** 格式，遵循 **RESTful** 架构风格。

---

## 1. 认证模块 (Authentication)

### 1.1 管理员登录
- **Endpoint**: `POST /api/auth/login`
- **请求参数**:
  | 参数名 | 类型 | 必填 | 描述 |
  | :--- | :--- | :--- | :--- |
  | username | string | 是 | 用户名 |
  | password | string | 是 | 密码 |
- **响应参数**:
  ```json
  {
    "code": 200,
    "message": "success",
    "data": {
      "token": "eyJhbGciOiJIUzI1Ni...",
      "expiresAt": "2024-12-31T23:59:59Z",
      "user": {
        "id": "u_001",
        "name": "超级管理员",
        "avatar": "https://..."
      }
    }
  }
  ```

---

## 2. 首页 Hero 区域管理 (Hero Section)

### 2.1 获取/更新 Hero 配置
- **Endpoint**: `GET /api/hero` / `PUT /api/hero`
- **PUT 请求参数**:
  | 参数名 | 类型 | 描述 |
  | :--- | :--- | :--- |
  | headline | string | 主标题（如：辣，让味蕾跳舞） |
  | subHeadline | string | 副标题文案 |
  | backgroundImage | string | 背景图 URL |
  | videoUrl | string | 背景视频 URL（可选） |
  | ctaText | string | 主按钮文案（如：立即探索） |
  | secondaryCtaText| string | 次要按钮文案 |
- **响应参数**: 同请求参数结构。

---

## 3. 品牌故事管理 (Story Management)

### 3.1 获取故事列表
- **Endpoint**: `GET /api/stories`
- **响应参数**:
  ```json
  {
    "items": [
      {
        "id": "s_01",
        "year": "2018",
        "title": "不止是辣的味道",
        "content": "故事详细内容...",
        "image": "url",
        "order": 1
      }
    ]
  }
  ```

### 3.2 新增/修改故事节点
- **Endpoint**: `POST /api/stories` / `PUT /api/stories/:id`
- **请求参数**:
  | 参数名 | 类型 | 必填 | 描述 |
  | :--- | :--- | :--- | :--- |
  | year | string | 是 | 年份或阶段名称 |
  | title | string | 是 | 故事标题 |
  | content | string | 是 | 正文内容 |
  | image | string | 是 | 图片地址 |
  | order | number | 否 | 显示顺序权重 |

---

## 4. 产品矩阵管理 (Products Management)

### 4.1 获取产品列表
- **Endpoint**: `GET /api/products`
- **查询参数**: `page` (int), `pageSize` (int), `category` (string)
- **响应参数**:
  ```json
  {
    "total": 45,
    "items": [
      {
        "id": "p_001",
        "name": "爆辣绝响",
        "spicyLevel": 5,
        "tagline": "辣出真味",
        "description": "产品描述...",
        "image": "url",
        "themeColor": "#991b1b",
        "status": "published"
      }
    ]
  }
  ```

### 4.2 保存产品 (新建/更新)
- **Endpoint**: `POST /api/products` / `PUT /api/products/:id`
- **请求参数**:
  | 参数名 | 类型 | 必填 | 描述 |
  | :--- | :--- | :--- | :--- |
  | name | string | 是 | 产品名称 |
  | spicyLevel | number | 是 | 辣度 (1-5) |
  | tagline | string | 是 | 简短口号 |
  | description | string | 是 | 详细描述 |
  | image | string | 是 | 高清展示图 |
  | themeColor | string | 否 | 品牌色（Hex） |
  | isFeatured | boolean | 否 | 是否推荐到主舞台 |

---

## 5. 制作工艺管理 (Craft Management)

### 5.1 获取工艺步骤
- **Endpoint**: `GET /api/craft/steps`
- **响应参数**:
  ```json
  [
    { "id": "01", "title": "选料", "desc": "...", "icon": "svg_path" },
    ...
  ]
  ```

### 5.2 更新工艺短片
- **Endpoint**: `PUT /api/craft/video`
- **请求参数**:
  | 参数名 | 类型 | 描述 |
  | :--- | :--- | :--- |
  | videoUrl | string | 视频流地址 |
  | coverImage | string | 视频封面占位图 |
  | title | string | 短片标题 |

---

## 6. 互动体验区配置 (Blast Hot Zone)

### 6.1 修改辣度反馈
- **Endpoint**: `PUT /api/hot-zone/levels/:level`
- **请求参数**:
  | 参数名 | 类型 | 描述 |
  | :--- | :--- | :--- |
  | label | string | 级别名称（如：地狱熔岩） |
  | desc | string | 感受描述 |
  | color | string | UI 强调色 |
  | shakeIntensity| number | 屏幕抖动强度系数 |

---

## 7. 全局配置与媒体中心

### 7.1 图片上传 (Media Upload)
- **Endpoint**: `POST /api/media/upload`
- **请求参数**: `FormData` 格式，字段名 `file`
- **响应参数**:
  ```json
  {
    "url": "https://cdn.example.com/images/2024/new_product.jpg",
    "metadata": { "size": 102400, "mime": "image/jpeg" }
  }
  ```

---

## 8. 数据统计 (Analytics)

### 8.1 互动行为分析
- **Endpoint**: `GET /api/stats/interactions`
- **查询参数**: `startDate` (string), `endDate` (string)
- **响应参数**:
  ```json
  {
    "totalInteractions": 1250,
    "levelDistribution": {
      "level1": 100,
      "level2": 200,
      "level3": 500,
      "level4": 300,
      "level5": 150
    },
    "peakTime": "21:00-23:00"
  }
  ```

### 8.2 错误日志监控
- **Endpoint**: `GET /api/stats/errors`
- **描述**: 获取前端 API 调用失败或资源加载失败的统计，用于维护网站稳定性。
